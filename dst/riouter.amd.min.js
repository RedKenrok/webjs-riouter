define(["exports"],(function(t){"use strict";function e(t,e){void 0===e&&(e={});for(var r=function(t){for(var e=[],n=0;n<t.length;){var r=t[n];if("*"!==r&&"+"!==r&&"?"!==r)if("\\"!==r)if("{"!==r)if("}"!==r)if(":"!==r)if("("!==r)e.push({type:"CHAR",index:n,value:t[n++]});else{var o=1,s="";if("?"===t[u=n+1])throw new TypeError('Pattern cannot start with "?" at '+u);for(;u<t.length;)if("\\"!==t[u]){if(")"===t[u]){if(0==--o){u++;break}}else if("("===t[u]&&(o++,"?"!==t[u+1]))throw new TypeError("Capturing groups are not allowed at "+u);s+=t[u++]}else s+=t[u++]+t[u++];if(o)throw new TypeError("Unbalanced pattern at "+n);if(!s)throw new TypeError("Missing pattern at "+n);e.push({type:"PATTERN",index:n,value:s}),n=u}else{for(var i="",u=n+1;u<t.length;){var a=t.charCodeAt(u);if(!(a>=48&&a<=57||a>=65&&a<=90||a>=97&&a<=122||95===a))break;i+=t[u++]}if(!i)throw new TypeError("Missing parameter name at "+n);e.push({type:"NAME",index:n,value:i}),n=u}else e.push({type:"CLOSE",index:n,value:t[n++]});else e.push({type:"OPEN",index:n,value:t[n++]});else e.push({type:"ESCAPED_CHAR",index:n++,value:t[n++]});else e.push({type:"MODIFIER",index:n,value:t[n++]})}return e.push({type:"END",index:n,value:""}),e}(t),o=e.prefixes,s=void 0===o?"./":o,i="[^"+n(e.delimiter||"/#?")+"]+?",u=[],a=0,c=0,h="",l=function(t){if(c<r.length&&r[c].type===t)return r[c++].value},d=function(t){var e=l(t);if(void 0!==e)return e;var n=r[c],o=n.type,s=n.index;throw new TypeError("Unexpected "+o+" at "+s+", expected "+t)},p=function(){for(var t,e="";t=l("CHAR")||l("ESCAPED_CHAR");)e+=t;return e};c<r.length;){var m=l("CHAR"),f=l("NAME"),v=l("PATTERN");if(f||v){var b=m||"";-1===s.indexOf(b)&&(h+=b,b=""),h&&(u.push(h),h=""),u.push({name:f||a++,prefix:b,suffix:"",pattern:v||i,modifier:l("MODIFIER")||""})}else{var g=m||l("ESCAPED_CHAR");if(g)h+=g;else if(h&&(u.push(h),h=""),l("OPEN")){b=p();var y=l("NAME")||"",O=l("PATTERN")||"",w=p();d("CLOSE"),u.push({name:y||(O?a++:""),pattern:y&&!O?i:O,prefix:b,suffix:w,modifier:l("MODIFIER")||""})}else d("END")}}return u}function n(t){return t.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function r(t){return t&&t.sensitive?"":"i"}function o(t,o,s){return function(t,e,o){void 0===o&&(o={});for(var s=o.strict,i=void 0!==s&&s,u=o.start,a=void 0===u||u,c=o.end,h=void 0===c||c,l=o.encode,d=void 0===l?function(t){return t}:l,p="["+n(o.endsWith||"")+"]|$",m="["+n(o.delimiter||"/#?")+"]",f=a?"^":"",v=0,b=t;v<b.length;v++){var g=b[v];if("string"==typeof g)f+=n(d(g));else{var y=n(d(g.prefix)),O=n(d(g.suffix));if(g.pattern)if(e&&e.push(g),y||O)if("+"===g.modifier||"*"===g.modifier){var w="*"===g.modifier?"?":"";f+="(?:"+y+"((?:"+g.pattern+")(?:"+O+y+"(?:"+g.pattern+"))*)"+O+")"+w}else f+="(?:"+y+"("+g.pattern+")"+O+")"+g.modifier;else f+="("+g.pattern+")"+g.modifier;else f+="(?:"+y+O+")"+g.modifier}}if(h)i||(f+=m+"?"),f+=o.endsWith?"(?="+p+")":"$";else{var N=t[t.length-1],x="string"==typeof N?m.indexOf(N[N.length-1])>-1:void 0===N;i||(f+="(?:"+m+"(?="+p+"))?"),x||(f+="(?="+m+"|"+p+")")}return new RegExp(f,r(o))}(e(t,s),o,s)}function s(t,e,n){return t instanceof RegExp?function(t,e){if(!e)return t;for(var n=/\((?:\?<(.*?)>)?(?!\?)/g,r=0,o=n.exec(t.source);o;)e.push({name:o[1]||r++,prefix:"",suffix:"",modifier:"",pattern:""}),o=n.exec(t.source);return t}(t,e):Array.isArray(t)?function(t,e,n){var o=t.map((function(t){return s(t,e,n).source}));return new RegExp("(?:"+o.join("|")+")",r(n))}(t,e,n):o(t,e,n)}class i extends class{constructor(){this._events={}}destroy(){this._events=null}addListener(t,e){return Object.prototype.hasOwnProperty.call(this._events,t)?this._events[t].indexOf(e)<0&&this._events[t].push(e):this._events[t]=[e],!0}removeListener(t,e){if(!Object.prototype.hasOwnProperty.call(this._events,t))return;if(this._events[t].length<=0)return;const n=this._events[t].indexOf(e);n>=0&&this._events[t].splice(n,1)}removeAllListeners(t){void 0===t&&(t=null),t&&!Object.prototype.hasOwnProperty.call(this._events,t)||delete this._events[t]}dispatch(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];Object.prototype.hasOwnProperty.call(this._events,t)&&(this._events[t].length<=0||this._events[t].forEach((t=>{t(...n)})))}}{constructor(t){void 0===t&&(t=null),super(),this._options=Object.assign({basePath:"",updateHistory:!1,pathToRegexp:{}},t),this._pathCurrent=null,this._routes={},this._routeCurrent=null}destroy(){this._options=null,this._pathCurrent=null,this._routeCurrent=null,this._routes=null,super.destroy()}getPath(){return this._pathCurrent}addRoute(t,e){void 0===e&&(e={});const n=s(t,[],e);this._routes[t]=t=>n.test(t),this.dispatch("added",{route:t,router:this})}removeRoute(t){delete this._routes[t]}getRoutes(){return Object.keys(this._routes)}push(t){const e=t.replace(this._options.basePath,"");if(this._pathCurrent===e)return!0;let n=null;for(const t in this._routes){if((0,this._routes[t])(e)){n=t;break}}if(!n)return!1;if(this._pathCurrent=e,this._routeCurrent=n,this._options.updateHistory&&"undefined"!=typeof window){const e=t.includes(this._options.basePath)?t:this._options.basePath+t;e!==window.history.location&&window.history.pushState(null,window.document.title,e)}return this.dispatch("pushed",{path:this._pathCurrent,router:this,route:this._routeCurrent}),!0}}var u=4;function a(t,e){t.firstChild&&(e.appendChild(t.firstChild),a(t,e))}function c(t){h(t.childNodes)}function h(t){Array.from(t).forEach(l)}const l=t=>t&&t.parentNode&&t.parentNode.removeChild(t),d=(t,e)=>e&&e.parentNode&&e.parentNode.insertBefore(t,e),p=Symbol("pure"),m=Symbol("parent"),f=Symbol("head"),v=Symbol("tail");function b(t){const e=t.dom.cloneNode(!0),{head:n,tail:r}=function(){const t=document.createTextNode(""),e=document.createTextNode("");return t[f]=!0,e[v]=!0,{head:t,tail:e}}();return{avoidDOMInjection:!0,fragment:e,head:n,tail:r,children:[n,...Array.from(e.childNodes),r]}}function g(t,e,n,r={}){return Object.defineProperty(t,e,{value:n,enumerable:!1,writable:!1,configurable:!0,...r}),t}function y(t,e){return typeof t===e}function O(t){const e=t.ownerSVGElement;return!!e||null===e}function w(t){return"template"===t.tagName.toLowerCase()}function N(t){return null==t}const x=Symbol("unmount"),E={nodes:[],mount(t,e){return this.update(t,e)},update(t,e){const{placeholder:n,nodes:r,childrenMap:o}=this,s=t===x?null:this.evaluate(t),i=s?Array.from(s):[],{newChildrenMap:u,batches:a,futureNodes:c}=function(t,e,n,r){const{condition:o,template:s,childrenMap:i,itemName:u,getKey:a,indexName:c,root:h,isTemplateTag:l}=r,d=new Map,p=[],m=[];return t.forEach(((t,r)=>{const f=function(t,{itemName:e,indexName:n,index:r,item:o}){g(t,e,o),n&&g(t,n,r);return t}(Object.create(e),{itemName:u,indexName:c,index:r,item:t}),v=a?a(f):r,y=i.get(v),O=[];if(function(t,e){return!!t&&!t(e)}(o,f))return;const w=!y,N=y?y.template:s.clone(),x=N.el||h.cloneNode(),E=l&&w?b(N):N.meta;w?p.push((()=>N.mount(x,f,n,E))):p.push((()=>N.update(f,n))),l?O.push(...E.children):O.push(x),i.delete(v),m.push(...O),d.set(v,{nodes:O,template:N,context:f,index:r})})),{newChildrenMap:d,batches:p,futureNodes:m}}(i,t,e,this);return((t,e,n,r)=>{const o=e.length;let s=t.length,i=o,u=0,a=0,c=null;for(;u<s||a<i;)if(s===u){const t=i<o?a?n(e[a-1],-0).nextSibling:n(e[i-a],0):r;for(;a<i;)d(n(e[a++],1),t)}else if(i===a)for(;u<s;)c&&c.has(t[u])||l(n(t[u],-1)),u++;else if(t[u]===e[a])u++,a++;else if(t[s-1]===e[i-1])s--,i--;else if(t[u]===e[i-1]&&e[a]===t[s-1]){const r=n(t[--s],-1).nextSibling;d(n(e[a++],1),n(t[u++],-1).nextSibling),d(n(e[--i],1),r),t[s]=e[i]}else{if(!c){c=new Map;let t=a;for(;t<i;)c.set(e[t],t++)}if(c.has(t[u])){const r=c.get(t[u]);if(a<r&&r<i){let o=u,l=1;for(;++o<s&&o<i&&c.get(t[o])===r+l;)l++;if(l>r-a){const o=n(t[u],0);for(;a<r;)d(n(e[a++],1),o)}else h=n(e[a++],1),(p=n(t[u++],-1))&&p.parentNode&&p.parentNode.replaceChild(h,p)}else u++}else l(n(t[u++],-1))}var h,p})(r,c,function(t,e){return(n,r)=>{if(r<0){const n=t[t.length-1];if(n){const{template:r,nodes:o,context:s}=n;o.pop(),o.length||(t.pop(),r.unmount(s,e,null))}}return n}}(Array.from(o.values()),e),n),a.forEach((t=>t())),this.childrenMap=u,this.nodes=c,this},unmount(t,e){return this.update(x,e),this}};const j={mount(t,e){return this.update(t,e)},update(t,e){const n=!!this.evaluate(t),r=!this.value&&n,o=this.value&&!n,s=()=>{const n=this.node.cloneNode();d(n,this.placeholder),this.template=this.template.clone(),this.template.mount(n,t,e)};switch(!0){case r:s();break;case o:this.unmount(t);break;default:n&&this.template.update(t,e)}return this.value=n,this},unmount(t,e){return this.template.unmount(t,e,!0),this}};const A="undefined"==typeof Element?{}:Element.prototype,M=function(t){const e=new Map,n=n=>(e.has(n)||e.set(n,t.call(this,n)))&&e.get(n);return n.cache=e,n}((t=>A.hasOwnProperty(t)));function C(t,{name:e},n,r){if(!e)return r&&function(t,e,n){const r=e?Object.keys(e):[];Object.keys(n).filter((t=>!r.includes(t))).forEach((e=>t.removeAttribute(e)))}(t,n,r),void(n&&function(t,e){Object.entries(e).forEach((([e,n])=>C(t,{name:e},n)))}(t,n));!M(e)&&(function(t){return y(t,"boolean")}(n)||function(t){return!N(t)&&t.constructor===Object}(n)||function(t){return y(t,"function")}(n))&&(t[e]=n),!function(t){return!t&&0!==t}(n)?function(t){return!0===t||["string","number"].includes(typeof t)}(n)&&t.setAttribute(e,function(t,e){return!0===e?t:e}(e,n)):t.removeAttribute(e)}const T=/^on/,S={handleEvent(t){this[t.type](t)}},_=new WeakMap;function D(t){return N(t)?"":t}const P=(t,e)=>{const n=t.childNodes[e];if(n.nodeType===Node.COMMENT_NODE){const e=document.createTextNode("");return t.replaceChild(e,n),e}return n};var k={0:C,1:function(t,{name:e},n){const r=e.replace(T,""),o=_.get(t)||(t=>{const e=Object.create(S);return _.set(t,e),e})(t),[s,i]=(t=>Array.isArray(t)?t:[t,!1])(n),u=o[r],a=s&&!u;u&&!s&&t.removeEventListener(r,o),a&&t.addEventListener(r,o,i),o[r]=s},2:function(t,e,n){t.data=D(n)},3:function(t,e,n){t.value=D(n)}};const R={mount(t){return this.value=this.evaluate(t),L(this,this.value),this},update(t){const e=this.evaluate(t);return this.value!==e&&(L(this,e),this.value=e),this},unmount(){return 1===this.type&&L(this,null),this}};function L(t,e){return k[t.type](t.node,t,e,t.value)}const I=(t,e)=>t[m]||e,U={attributes:[],getTemplateScope(t,e){return function(t,e,n){if(!t||!t.length)return n;const r=t.map((t=>({...t,value:t.evaluate(e)})));return Object.assign(Object.create(n||null),function(t){return t.reduce(((t,e)=>{const{value:n,type:r}=e;switch(!0){case!e.name&&0===r:return{...t,...n};case 3===r:t.value=e.value;break;default:t[(o=e.name,o.replace(/-(\w)/g,((t,e)=>e.toUpperCase())))]=e.value}var o;return t}),{})}(r))}(this.attributes,t,e)},mount(t,e){const n=!!t.slots&&t.slots.find((({id:t})=>t===this.name)),{parentNode:r}=this.node,o=I(t,e);return this.template=n&&W(n.html,n.bindings).createDOM(r),this.template&&(c(this.node),this.template.mount(this.node,this.getTemplateScope(t,o),o),this.template.children=Array.from(this.node.childNodes)),H(this.node),l(this.node),this},update(t,e){if(this.template){const n=I(t,e);this.template.update(this.getTemplateScope(t,n),n)}return this},unmount(t,e,n){return this.template&&this.template.unmount(this.getTemplateScope(t,e),null,n),this}};function H(t){const e=t&&t.firstChild;e&&(d(e,t),H(t))}function B(t){return t.reduce(((t,{bindings:e})=>t.concat(e)),[])}const $={mount(t){return this.update(t)},update(t,e){const n=this.evaluate(t);return n&&n===this.name?this.tag.update(t):(this.unmount(t,e,!0),this.name=n,this.tag=function(t,e=[],n=[]){return t?t({slots:e,attributes:n}):W(function(t){return t.reduce(((t,e)=>t+e.html),"")}(e),[...B(e),{expressions:n.map((t=>({type:0,...t})))}])}(this.getComponent(n),this.slots,this.attributes),this.tag.mount(this.node,t)),this},unmount(t,e,n){return this.tag&&this.tag.unmount(n),this}};var F={1:function(t,{evaluate:e,template:n}){const r=document.createTextNode("");return d(r,t),l(t),{...j,node:t,evaluate:e,placeholder:r,template:n.createDOM(t)}},2:function(t,{expressions:e}){return{...(n=e.map((e=>function(t,e){return{...R,...e,node:2===e.type?P(t,e.childNodeIndex):t}}(t,e))),r=["mount","update","unmount"],r.reduce(((t,e)=>({...t,[e]:t=>n.map((n=>n[e](t)))&&o})),{}))};var n,r,o},0:function(t,{evaluate:e,condition:n,itemName:r,indexName:o,getKey:s,template:i}){const u=document.createTextNode(""),a=t.cloneNode();return d(u,t),l(t),{...E,childrenMap:new Map,node:t,root:a,condition:n,evaluate:e,isTemplateTag:w(a),template:i.createDOM(t),getKey:s,indexName:o,itemName:r,placeholder:u}},3:function(t,{evaluate:e,getComponent:n,slots:r,attributes:o}){return{...$,node:t,evaluate:e,slots:r,attributes:o,getComponent:n}},4:function(t,{name:e,attributes:n}){return{...U,attributes:n,node:t,name:e}}};function z(t,e){return t.map((t=>2===t.type?{...t,childNodeIndex:t.childNodeIndex+e}:t))}function K(t,e){return O(t)?function(t,e){return e.ownerDocument.importNode((new window.DOMParser).parseFromString(`<svg xmlns="http://www.w3.org/2000/svg">${t}</svg>`,"application/xml").documentElement,!0)}(e,t):function(t,e){const n=w(e)?e:document.createElement("template");return n.innerHTML=t,n.content}(e,t)}function q(t,e){switch(!0){case O(t):a(e,t);break;case w(t):t.parentNode.replaceChild(e,t);break;default:t.appendChild(e)}}const V=Object.freeze({createDOM(t){return this.dom=this.dom||function(t,e){return e&&("string"==typeof e?K(t,e):e)}(t,this.html)||document.createDocumentFragment(),this},mount(t,e,n,r={}){if(!t)throw new Error("Please provide DOM node to mount properly your template");this.el&&this.unmount(e);const{fragment:o,children:s,avoidDOMInjection:i}=r,{parentNode:u}=s?s[0]:t,a=w(t),c=a?function(t,e,n){const r=Array.from(t.childNodes);return Math.max(r.indexOf(e),r.indexOf(n.head)+1,0)}(u,t,r):null;this.createDOM(t);const h=o||this.dom.cloneNode(!0);return this.el=a?u:t,this.children=a?s||Array.from(h.childNodes):null,!i&&h&&q(t,h),this.bindings=this.bindingsData.map((t=>function(t,e,n){const{selector:r,type:o,redundantAttribute:s,expressions:i}=e,u=r?t.querySelector(r):t;s&&u.removeAttribute(s);const a=i||[];return(F[o]||F[2])(u,{...e,expressions:n&&!r?z(a,n):a})}(this.el,t,c))),this.bindings.forEach((t=>t.mount(e,n))),this.meta=r,this},update(t,e){return this.bindings.forEach((n=>n.update(t,e))),this},unmount(t,e,n=!1){const r=this.el;if(!r)return this;switch(this.bindings.forEach((r=>r.unmount(t,e,n))),!0){case r[p]||null===n:break;case Array.isArray(this.children):h(this.children);break;case!n:c(r);break;case!!n:l(r)}return this.el=null,this},clone(){return{...this,meta:{},el:null}}});function W(t,e=[]){return{...V,html:t,bindingsData:e}}
/* Riot v6.1.2, @license MIT */function G(t){return t.replace(/-(\w)/g,((t,e)=>e.toUpperCase()))}function X(t,e){t.firstChild&&(e.appendChild(t.firstChild),X(t,e))}function Y(t){Z(t.childNodes)}function Z(t){Array.from(t).forEach(J)}const J=t=>t&&t.parentNode&&t.parentNode.removeChild(t),Q=(t,e)=>e&&e.parentNode&&e.parentNode.insertBefore(t,e),tt=new Map,et=Symbol("riot-component"),nt=new Set,rt="mount",ot="update",st="unmount",it="shouldUpdate",ut="onBeforeMount",at="onMounted",ct="onBeforeUpdate",ht="onUpdated",lt="onBeforeUnmount",dt="onUnmounted",pt="props",mt="state",ft="slots",vt="root",bt=Symbol("pure"),gt=Symbol("is_updating"),yt=Symbol("parent"),Ot=Symbol("attributes"),wt=Symbol("template");var Nt={EACH:0,IF:1,SIMPLE:2,TAG:3,SLOT:4};var xt={ATTRIBUTE:0,EVENT:1,TEXT:2,VALUE:3};const Et=Symbol("head"),jt=Symbol("tail");function At(t){const e=t.dom.cloneNode(!0),{head:n,tail:r}=function(){const t=document.createTextNode(""),e=document.createTextNode("");return t[Et]=!0,e[jt]=!0,{head:t,tail:e}}();return{avoidDOMInjection:!0,fragment:e,head:n,tail:r,children:[n,...Array.from(e.childNodes),r]}}function Mt(t,e,n,r){return void 0===r&&(r={}),Object.defineProperty(t,e,Object.assign({value:n,enumerable:!1,writable:!1,configurable:!0},r)),t}function Ct(t,e,n){return Object.entries(e).forEach((e=>{let[r,o]=e;Mt(t,r,o,n)})),t}function Tt(t,e){return Object.entries(e).forEach((e=>{let[n,r]=e;t[n]||(t[n]=r)})),t}function St(t,e){return typeof t===e}function _t(t){const e=t.ownerSVGElement;return!!e||null===e}function Dt(t){return"template"===t.tagName.toLowerCase()}function Pt(t){return St(t,"function")}function kt(t){return!Rt(t)&&t.constructor===Object}function Rt(t){return null==t}const Lt=Symbol("unmount"),It={nodes:[],mount(t,e){return this.update(t,e)},update(t,e){const{placeholder:n,nodes:r,childrenMap:o}=this,s=t===Lt?null:this.evaluate(t),i=s?Array.from(s):[],{newChildrenMap:u,batches:a,futureNodes:c}=function(t,e,n,r){const{condition:o,template:s,childrenMap:i,itemName:u,getKey:a,indexName:c,root:h,isTemplateTag:l}=r,d=new Map,p=[],m=[];return t.forEach(((t,r)=>{const f=function(t,e){let{itemName:n,indexName:r,index:o,item:s}=e;Mt(t,n,s),r&&Mt(t,r,o);return t}(Object.create(e),{itemName:u,indexName:c,index:r,item:t}),v=a?a(f):r,b=i.get(v),g=[];if(function(t,e){return!!t&&!t(e)}(o,f))return;const y=!b,O=b?b.template:s.clone(),w=O.el||h.cloneNode(),N=l&&y?At(O):O.meta;y?p.push((()=>O.mount(w,f,n,N))):p.push((()=>O.update(f,n))),l?g.push(...N.children):g.push(w),i.delete(v),m.push(...g),d.set(v,{nodes:g,template:O,context:f,index:r})})),{newChildrenMap:d,batches:p,futureNodes:m}}(i,t,e,this);return((t,e,n,r)=>{const o=e.length;let s=t.length,i=o,u=0,a=0,c=null;for(;u<s||a<i;)if(s===u){const t=i<o?a?n(e[a-1],-0).nextSibling:n(e[i-a],0):r;for(;a<i;)Q(n(e[a++],1),t)}else if(i===a)for(;u<s;)c&&c.has(t[u])||J(n(t[u],-1)),u++;else if(t[u]===e[a])u++,a++;else if(t[s-1]===e[i-1])s--,i--;else if(t[u]===e[i-1]&&e[a]===t[s-1]){const r=n(t[--s],-1).nextSibling;Q(n(e[a++],1),n(t[u++],-1).nextSibling),Q(n(e[--i],1),r),t[s]=e[i]}else{if(!c){c=new Map;let t=a;for(;t<i;)c.set(e[t],t++)}if(c.has(t[u])){const r=c.get(t[u]);if(a<r&&r<i){let o=u,d=1;for(;++o<s&&o<i&&c.get(t[o])===r+d;)d++;if(d>r-a){const o=n(t[u],0);for(;a<r;)Q(n(e[a++],1),o)}else h=n(e[a++],1),(l=n(t[u++],-1))&&l.parentNode&&l.parentNode.replaceChild(h,l)}else u++}else J(n(t[u++],-1))}var h,l})(r,c,function(t,e){return(n,r)=>{if(r<0){const n=t[t.length-1];if(n){const{template:r,nodes:o,context:s}=n;o.pop(),o.length||(t.pop(),r.unmount(s,e,null))}}return n}}(Array.from(o.values()),e),n),a.forEach((t=>t())),this.childrenMap=u,this.nodes=c,this},unmount(t,e){return this.update(Lt,e),this}};const Ut={mount(t,e){return this.update(t,e)},update(t,e){const n=!!this.evaluate(t),r=!this.value&&n,o=this.value&&!n,s=()=>{const n=this.node.cloneNode();Q(n,this.placeholder),this.template=this.template.clone(),this.template.mount(n,t,e)};switch(!0){case r:s();break;case o:this.unmount(t);break;default:n&&this.template.update(t,e)}return this.value=n,this},unmount(t,e){return this.template.unmount(t,e,!0),this}};function Ht(t){throw new Error(t)}function Bt(t){const e=new Map,n=n=>(e.has(n)||e.set(n,t.call(this,n)))&&e.get(n);return n.cache=e,n}function $t(t){return t.reduce(((t,e)=>{const{value:n,type:r}=e;switch(!0){case!e.name&&0===r:return Object.assign({},t,n);case 3===r:t.value=e.value;break;default:t[G(e.name)]=e.value}return t}),{})}const Ft="undefined"==typeof Element?{}:Element.prototype,zt=Bt((t=>Ft.hasOwnProperty(t)));function Kt(t,e,n,r){let{name:o}=e;if(!o)return r&&function(t,e,n){const r=e?Object.keys(e):[];Object.keys(n).filter((t=>!r.includes(t))).forEach((e=>t.removeAttribute(e)))}(t,n,r),void(n&&function(t,e){Object.entries(e).forEach((e=>{let[n,r]=e;return Kt(t,{name:n},r)}))}(t,n));!zt(o)&&(function(t){return St(t,"boolean")}(n)||kt(n)||Pt(n))&&(t[o]=n),!function(t){return!t&&0!==t}(n)?function(t){return!0===t||["string","number"].includes(typeof t)}(n)&&t.setAttribute(o,function(t,e){return!0===e?t:e}(o,n)):t.removeAttribute(o)}const qt=/^on/,Vt={handleEvent(t){this[t.type](t)}},Wt=new WeakMap;function Gt(t){return Rt(t)?"":t}const Xt=(t,e)=>{const n=t.childNodes[e];if(n.nodeType===Node.COMMENT_NODE){const e=document.createTextNode("");return t.replaceChild(e,n),e}return n};var Yt={0:Kt,1:function(t,e,n){let{name:r}=e;const o=r.replace(qt,""),s=Wt.get(t)||(t=>{const e=Object.create(Vt);return Wt.set(t,e),e})(t),[i,u]=(t=>Array.isArray(t)?t:[t,!1])(n),a=s[o],c=i&&!a;a&&!i&&t.removeEventListener(o,s),c&&t.addEventListener(o,s,u),s[o]=i},2:function(t,e,n){t.data=Gt(n)},3:function(t,e,n){t.value=Gt(n)}};const Zt={mount(t){return this.value=this.evaluate(t),Jt(this,this.value),this},update(t){const e=this.evaluate(t);return this.value!==e&&(Jt(this,e),this.value=e),this},unmount(){return 1===this.type&&Jt(this,null),this}};function Jt(t,e){return Yt[t.type](t.node,t,e,t.value)}function Qt(t,e){return Object.assign({},Zt,e,{node:2===e.type?Xt(t,e.childNodeIndex):t})}const te=(t,e)=>t[yt]||e,ee={attributes:[],getTemplateScope(t,e){return function(t,e,n){if(!t||!t.length)return n;const r=t.map((t=>Object.assign({},t,{value:t.evaluate(e)})));return Object.assign(Object.create(n||null),$t(r))}(this.attributes,t,e)},mount(t,e){const n=!!t.slots&&t.slots.find((t=>{let{id:e}=t;return e===this.name})),{parentNode:r}=this.node,o=te(t,e);return this.template=n&&he(n.html,n.bindings).createDOM(r),this.template&&(Y(this.node),this.template.mount(this.node,this.getTemplateScope(t,o),o),this.template.children=Array.from(this.node.childNodes)),ne(this.node),J(this.node),this},update(t,e){if(this.template){const n=te(t,e);this.template.update(this.getTemplateScope(t,n),n)}return this},unmount(t,e,n){return this.template&&this.template.unmount(this.getTemplateScope(t,e),null,n),this}};function ne(t){const e=t&&t.firstChild;e&&(Q(e,t),ne(t))}function re(t){return t.reduce(((t,e)=>{let{bindings:n}=e;return t.concat(n)}),[])}const oe={mount(t){return this.update(t)},update(t,e){const n=this.evaluate(t);var r,o,s;return n&&n===this.name?this.tag.update(t):(this.unmount(t,e,!0),this.name=n,this.tag=(r=this.getComponent(n),o=this.slots,s=this.attributes,void 0===o&&(o=[]),void 0===s&&(s=[]),r?r({slots:o,attributes:s}):he(function(t){return t.reduce(((t,e)=>t+e.html),"")}(o),[...re(o),{expressions:s.map((t=>Object.assign({type:0},t)))}])),this.tag.mount(this.node,t)),this},unmount(t,e,n){return this.tag&&this.tag.unmount(n),this}};var se={1:function(t,e){let{evaluate:n,template:r}=e;const o=document.createTextNode("");return Q(o,t),J(t),Object.assign({},Ut,{node:t,evaluate:n,placeholder:o,template:r.createDOM(t)})},2:function(t,e){let{expressions:n}=e;return Object.assign({},(r=n.map((e=>Qt(t,e))),["mount","update","unmount"].reduce(((t,e)=>Object.assign({},t,{[e]:t=>r.map((n=>n[e](t)))&&o})),{})));var r,o},0:function(t,e){let{evaluate:n,condition:r,itemName:o,indexName:s,getKey:i,template:u}=e;const a=document.createTextNode(""),c=t.cloneNode();return Q(a,t),J(t),Object.assign({},It,{childrenMap:new Map,node:t,root:c,condition:r,evaluate:n,isTemplateTag:Dt(c),template:u.createDOM(t),getKey:i,indexName:s,itemName:o,placeholder:a})},3:function(t,e){let{evaluate:n,getComponent:r,slots:o,attributes:s}=e;return Object.assign({},oe,{node:t,evaluate:n,slots:o,attributes:s,getComponent:r})},4:function(t,e){let{name:n,attributes:r}=e;return Object.assign({},ee,{attributes:r,node:t,name:n})}};function ie(t,e){return t.map((t=>2===t.type?Object.assign({},t,{childNodeIndex:t.childNodeIndex+e}):t))}function ue(t,e){return _t(t)?function(t,e){return e.ownerDocument.importNode((new window.DOMParser).parseFromString(`<svg xmlns="http://www.w3.org/2000/svg">${t}</svg>`,"application/xml").documentElement,!0)}(e,t):function(t,e){const n=Dt(e)?e:document.createElement("template");return n.innerHTML=t,n.content}(e,t)}function ae(t,e){switch(!0){case _t(t):X(e,t);break;case Dt(t):t.parentNode.replaceChild(e,t);break;default:t.appendChild(e)}}const ce=Object.freeze({createDOM(t){return this.dom=this.dom||function(t,e){return e&&("string"==typeof e?ue(t,e):e)}(t,this.html)||document.createDocumentFragment(),this},mount(t,e,n,r){if(void 0===r&&(r={}),!t)throw new Error("Please provide DOM node to mount properly your template");this.el&&this.unmount(e);const{fragment:o,children:s,avoidDOMInjection:i}=r,{parentNode:u}=s?s[0]:t,a=Dt(t),c=a?function(t,e,n){const r=Array.from(t.childNodes);return Math.max(r.indexOf(e),r.indexOf(n.head)+1,0)}(u,t,r):null;this.createDOM(t);const h=o||this.dom.cloneNode(!0);return this.el=a?u:t,this.children=a?s||Array.from(h.childNodes):null,!i&&h&&ae(t,h),this.bindings=this.bindingsData.map((t=>function(t,e,n){const{selector:r,type:o,redundantAttribute:s,expressions:i}=e,u=r?t.querySelector(r):t;s&&u.removeAttribute(s);const a=i||[];return(se[o]||se[2])(u,Object.assign({},e,{expressions:n&&!r?ie(a,n):a}))}(this.el,t,c))),this.bindings.forEach((t=>t.mount(e,n))),this.meta=r,this},update(t,e){return this.bindings.forEach((n=>n.update(t,e))),this},unmount(t,e,n){void 0===n&&(n=!1);const r=this.el;if(!r)return this;switch(this.bindings.forEach((r=>r.unmount(t,e,n))),!0){case r[bt]||null===n:break;case Array.isArray(this.children):Z(this.children);break;case!n:Y(r);break;case!!n:J(r)}return this.el=null,this},clone(){return Object.assign({},this,{meta:{},el:null})}});function he(t,e){return void 0===e&&(e=[]),Object.assign({},ce,{html:t,bindingsData:e})}function le(){return this}function de(t){return Pt(t)?t.prototype&&t.prototype.constructor?new t:t():t}function pe(t){return Array.isArray(t)?t:/^\[object (HTMLCollection|NodeList|Object)\]$/.test(Object.prototype.toString.call(t))&&"number"==typeof t.length?Array.from(t):[t]}function me(t,e){return pe("string"==typeof t?(e||document).querySelectorAll(t):t)}const fe=t=>1===t.length?t[0]:t;function ve(t,e,n){const r="object"==typeof e?e:{[e]:n},o=Object.keys(r);return pe(t).forEach((t=>{o.forEach((e=>t.setAttribute(e,r[e])))})),t}function be(t,e){return function(t,e,n){const r="string"==typeof e?[e]:e;return fe(pe(t).map((t=>fe(r.map((e=>t[n](e)))))))}(t,e,"getAttribute")}const ge=new Map,ye=()=>Oe||(ve(Oe=me("style[riot]")[0]||document.createElement("style"),"type","text/css"),Oe.parentNode||document.head.appendChild(Oe),Oe);var Oe,we={CSS_BY_NAME:ge,add(t,e){return ge.has(t)||(ge.set(t,e),this.inject()),this},inject(){return ye().innerHTML=[...ge.values()].join("\n"),this},remove(t){return ge.has(t)&&(ge.delete(t),this.inject()),this}};function Ne(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return(r=[...n,...r]).length<t.length?Ne(t,...r):t(...r)}}const xe=Object.freeze({$(t){return me(t,this.root)[0]},$$(t){return me(t,this.root)}}),Ee=Object.freeze({[rt]:le,[ot]:le,[st]:le}),je=Object.freeze({[it]:le,[ut]:le,[at]:le,[ct]:le,[ht]:le,[lt]:le,[dt]:le}),Ae=Object.assign({},Ee,{clone:le,createDOM:le}),Me=Bt(De);function Ce(t,e){return void 0===e&&(e={}),Object.assign({},function(t){return Array.from(t.attributes).reduce(((t,e)=>(t[G(e.name)]=e.value,t)),{})}(t),de(e))}const Te=(t,e)=>t[et]=e;function Se(t){return[rt,ot,st].reduce(((e,n)=>(e[n]=t(n),e)),{})}function _e(t,e){const n=function(t){void 0===t&&(t={});return Object.entries(de(t)).reduce(((t,e)=>{let[n,r]=e;var o;return t[(o=n,o.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase())]=De(r),t}),{})}(e.exports?e.exports.components:{});return t(he,xt,Nt,(t=>t===e.name?Me(e):n[t]||tt.get(t)))}function De(t){const{css:e,template:n,exports:r,name:o}=t,s=n?_e(n,t):Ae;return t=>{let{slots:i,attributes:u,props:a}=t;if(r&&r[bt])return function(t,e){let{slots:n,attributes:r,props:o,css:s,template:i}=e;i&&Ht("Pure components can not have html"),s&&Ht("Pure components do not have css");const u=Tt(t({slots:n,attributes:r,props:o}),Ee);return Se((t=>function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(t===rt){const[t]=n;Mt(t,bt,!0),Te(t,u)}return u[t](...n),u}))}(r,{slots:i,attributes:u,props:a,css:e,template:n});const c=de(r)||{},h=function(t){let{css:e,template:n,componentAPI:r,name:o}=t;e&&o&&we.add(o,e);return Ne(Re)(Ct(Tt(r,Object.assign({},je,{[pt]:{},[mt]:{}})),Object.assign({[ft]:null,[vt]:null},xe,{name:o,css:e,template:n})))}({css:e,template:s,componentAPI:c,name:o})({slots:i,attributes:u,props:a});return{mount:(t,e,n)=>h.mount(t,n,e),update:(t,e)=>h.update(e,t),unmount:t=>h.unmount(t)}}}function Pe(t,e){return Object.assign({},t,de(e))}function ke(t,e){(function(t){return be(t,"is")||t.tagName.toLowerCase()})(t)!==e&&ve(t,"is",e)}function Re(t,e){let{slots:n,attributes:r,props:o}=e;return s=function(t){return[...nt].reduce(((t,e)=>e(t)||t),t)}(Ct(kt(t)?Object.create(t):t,{mount(e,s,i){return void 0===s&&(s={}),Mt(e,bt,!1),this[yt]=i,this[Ot]=function(t,e){void 0===e&&(e=[]);const n=e.map((e=>Qt(t,e))),r={};return Object.assign(r,Object.assign({expressions:n},Se((t=>e=>(n.forEach((n=>n[t](e))),r)))))}(e,r).mount(i),Mt(this,pt,Object.freeze(Object.assign({},Ce(e,o),$t(this[Ot].expressions)))),this.state=Pe(this.state,s),this[wt]=this.template.createDOM(e).clone(),Te(e,this),t.name&&ke(e,t.name),Mt(this,vt,e),Mt(this,ft,n),this.onBeforeMount(this.props,this.state),this[wt].mount(e,this,i),this.onMounted(this.props,this.state),this},update(t,e){void 0===t&&(t={}),e&&(this[yt]=e,this[Ot].update(e));const n=$t(this[Ot].expressions);if(!1!==this.shouldUpdate(n,this.props))return Mt(this,pt,Object.freeze(Object.assign({},this.props,n))),this.state=Pe(this.state,t),this.onBeforeUpdate(this.props,this.state),this[gt]||(this[gt]=!0,this[wt].update(this,this[yt])),this.onUpdated(this.props,this.state),this[gt]=!1,this},unmount(t){return this.onBeforeUnmount(this.props,this.state),this[Ot].unmount(),this[wt].unmount(this,this[yt],null===t?null:!t),this.onUnmounted(this.props,this.state),this}})),Object.keys(t).filter((e=>Pt(t[e]))).forEach((t=>{s[t]=s[t].bind(s)})),s;var s}function Le(t){return Pt(t)||Ht('riot.pure accepts only arguments of type "function"'),t[bt]=!0,t}const Ie=Symbol("riouter");var Ue={name:"route",exports:Le((t=>{const e=e=>t&&t.attributes&&t.attributes.find((t=>t.name===e));return{mount(e,n){if(t&&t.slots&&t.slots.length){if(this.active=!1,this.el=this.root=e,this.state={},this.slot=W(null,[{type:u,name:"default"}]),this.router=n[Ie].router,this.route=this.root.getAttribute("path"),!this.route)throw new Error("No path found for route component.");this.router.addRoute(this.route),this.handleRouteChange=t=>{let{route:e}=t;const r=this.route===e;this.active!==r&&(this.active=r,this.update(n))},this.router.addListener("pushed",this.handleRouteChange)}},unmount(){this.router.removeListener("pushed",this.handleRouteChange),this.router.removeRoute(this.route),this.slot.unmount(...arguments)},update(n){if(this.active){const r=e("onBeforeMount");r&&r.evaluate(n)(this,this.router,this.route);const o=document.createElement("div");this.root.appendChild(o),this.slot.mount(o,{slots:t.slots},n);const s=e("onMounted");s&&s.evaluate(n)(this,this.router,this.route)}else{const r=e("onBeforeUnmount");r&&r.evaluate(n)(this,this.router,this.route),this.slot.unmount({slots:t.slots},n,!0);const o=e("onUnmounted");o&&o.evaluate(n)(this,this.router,this.route)}}}}))};const He=window.requestAnimationFrame||window.setTimeout,Be=window.cancelAnimationFrame||window.clearTimeout;var $e={name:"router",exports:Le((t=>{const e=e=>t&&t.attributes&&t.attributes.find((t=>t.name===e)),n=t=>{const n=e("base");return n?n.evaluate(t):window.location.protocol+"//"+window.location.host};return{mount(r,o){if(!t||!t.slots||!t.slots.length)return;const s=document.createElement("div");r.appendChild(s),this.el=this.root=s,this.state={};let a=e("updateHistory");a=!!a&&!!a.evaluate(o),this.router=new i({basePath:n(),updateHistory:a}),this.router.push(window.location.href),this.slot=W(null,[{type:u,name:"default"}]),o[Ie]=this;const c=e("onBeforeStart");c&&c.evaluate(o)(this,this.router),this.slot.mount(this.root,{slots:t.slots},o);const h=e("onStarted");h&&h.evaluate(o)(this,this.router)},unmount(){this.slot&&this.slot.unmount(...arguments),this.root.remove(),this.router.destroy()},update(){this.slot&&(this.deferred&&Be(this.deferred),this.deferred=He((()=>{this.slot.update({},this)})))}}}))};t.Router=i,t.route=Ue,t.router=$e,Object.defineProperty(t,"__esModule",{value:!0})}));
